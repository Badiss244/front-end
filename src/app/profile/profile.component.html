<div class="min-h-screen bg-blue-100 pt-8">
  <div class="max-w-2xl mx-auto">
    <!-- Main Card Container -->
    <div class="bg-white rounded-2xl shadow-xl p-8 relative">
      <!-- Back Button -->
      <button (click)="retour()" class="absolute -right-3 -top-3 bg-white rounded-full p-2 shadow-md text-gray-600 hover:text-gray-800 transition-colors">
        <i class="fas fa-times text-xl cursor-pointer"></i>
      </button>
      <!-- Header Section -->
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-[#352961] mb-2">Mon Profil</h2>
        <p class="text-gray-600">Gérez vos informations personnelles</p>
      </div>

      <!-- Profile Picture Section -->
      <div class="flex flex-col items-center mb-8">
        <div class="relative">
          <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg">
            <img 
              *ngIf="profileImage" 
              [src]="profileImage" 
              alt="Photo de profil" 
              class="w-full h-full object-cover"
            />
            <div *ngIf="!profileImage" class="w-full h-full bg-gray-200 flex items-center justify-center">
              <i class="fas fa-user text-gray-400 text-4xl"></i>
            </div>
          </div>
          <label for="fileInput" class="absolute bottom-0 right-0 bg-gray-800 rounded-full p-2 cursor-pointer shadow-lg hover:bg-blue-700 transition-colors">
            <i class="fa-solid fa-camera text-white"></i>
          </label>
          <input
            id="fileInput"
            type="file"
            (change)="onFileSelected($event)"
            class="hidden"
          />
        </div>
        <p class="mt-2 text-sm text-gray-600">Cliquez sur l'icône pour changer votre photo</p>
      </div>

      <!-- Form Section -->
      <form class="space-y-6" (submit)="$event.preventDefault(); updateProfileEtImage()">
        <!-- Username field -->
        <div class="space-y-2">
          <label for="usernameInput" class="block text-sm font-medium text-gray-700">
            Nom d'utilisateur
          </label>
          <input
            id="usernameInput"
            type="text"
            [(ngModel)]="username"
            name="username"
            placeholder="Votre nom d'utilisateur"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
          />
        </div>

        <!-- Email field -->
        <div class="space-y-2">
          <label for="emailInput" class="block text-sm font-medium text-gray-700">
            Email
          </label>
          <input
            id="emailInput"
            type="email"
            [(ngModel)]="email"
            name="email"
            placeholder="votre@email.com"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
          />
        </div>

        <!-- Phone field -->
        <div class="space-y-2">
          <label for="phoneInput" class="block text-sm font-medium text-gray-700">
            Téléphone
          </label>
          <input
            id="phoneInput"
            type="text"
            [(ngModel)]="phone"
            name="phone"
            placeholder="Votre numéro de téléphone"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
          />
        </div>

        <!-- Password Section -->
        <div class="pt-4 border-t border-gray-200">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Changer le mot de passe</h3>
          
          <!-- Current password field -->
          <div class="space-y-2 mb-4">
            <label for="currentPassword" class="block text-sm font-medium text-gray-700">
              Mot de passe actuel
            </label>
            <input
              type="password"
              id="currentPassword"
              [(ngModel)]="currentPassword"
              name="currentPassword"
              placeholder="••••••••"
              class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
            />
          </div>

          <!-- New password field -->
          <div class="space-y-2 mb-4">
            <label for="newPassword" class="block text-sm font-medium text-gray-700">
              Nouveau mot de passe
            </label>
            <input
              type="password"
              id="newPassword"
              [(ngModel)]="newPassword"
              name="newPassword"
              placeholder="••••••••"
              class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
            />
          </div>

          <!-- Confirm new password field -->
          <div class="space-y-2">
            <label for="confirmNewPassword" class="block text-sm font-medium text-gray-700">
              Confirmer le nouveau mot de passe
            </label>
            <input
              type="password"
              id="confirmNewPassword"
              [(ngModel)]="confirmNewPassword"
              name="confirmNewPassword"
              placeholder="••••••••"
              class="w-full px-4 py-2.5 rounded-lg border border-gray-300  transition-all"
            />
          </div>
        </div>

        <!-- Submit Button -->
         
        <button 
          type="button"
          (click)="updateProfileEtImage()" 
          class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all transform hover:scale-[1.02] cursor-pointer">
          Sauvegarder les modifications
        </button>
      </form>

      <!-- Messages Section -->
      <div class="mt-6">
        <div *ngIf="errorMessage" class="p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 text-center">
          {{ errorMessage }}
        </div>
        <div *ngIf="message" class="p-4 bg-green-50 border border-green-200 rounded-lg text-green-600 text-center">
          {{ message }}
        </div>
      </div>
    </div>
  </div>
</div>
<app-chat-bot-testing></app-chat-bot-testing>
  